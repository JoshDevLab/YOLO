<?xml version="1.0" encoding="UTF-8"?>

<!-- ==== mapper 기본설정 ==== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kimjh">

	<!-- 부서 조회하기 -->
	<resultMap type="HashMap" id="deptMap">
		<result property="deptname" column="deptname" javaType="String"/>
		<result property="deptno" column="deptno" javaType="String"/>
	</resultMap>
	<select id="selectDept"  parameterType="String" resultMap="deptMap">
		select  deptname, deptno
		from TBL_DEPT
		where upper_deptno = #{deptno}
	</select>
	
	
	<!--  -->
	<!-- <resultMap type="HashMap" id="deptPeopleMap">
		<result property="empno" column="empno" javaType="String"/>
		<result property="name" column="name" javaType="String"/>
	</resultMap>
	<select id="selectDept" resultMap="deptPeopleMap" parameterType="String">
		select M.empno, M.name
		from TBL_EMPLOYEES M join  TBL_DEPT D
		on M.fk_deptno = D.deptno
		where  STATUS='재직' AND ( fk_deptno = #{deptno} OR upper_deptno = #{deptno} )
		order by M.fk_deptno asc;
	</select> -->
	
	
	<!-- 부서 사람들 조회하기 -->
	<resultMap type="HashMap" id="deptPeopleMap">
		<result property="empno" column="empno" javaType="String"/>
		<result property="name" column="name" javaType="String"/>
	</resultMap>
	<select id="selectDeptPerson" parameterType="String" resultMap="deptPeopleMap">
		select empno, name
		from TBL_EMPLOYEES
		where STATUS='재직' AND deptno = #{deptno}
	</select>
	
</mapper>